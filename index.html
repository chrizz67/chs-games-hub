<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NotChris Hub</title>
  <link rel="stylesheet" href="style.css" />

  <!-- OPTIONAL GLOBAL BACKEND (Firebase v8) -->
  <!-- When you're ready for global chat + leaderboard:
       1. Make a Firebase project
       2. Get your config object
       3. Replace the window.NOTCHRIS_FIREBASE_CONFIG below
       4. Global features will auto-enable
  -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script>
    // üî• FILL THIS LATER IF YOU WANT GLOBAL FEATURES:
    // window.NOTCHRIS_FIREBASE_CONFIG = {
    //   apiKey: "...",
    //   authDomain: "...",
    //   projectId: "...",
    //   storageBucket: "...",
    //   messagingSenderId: "...",
    //   appId: "..."
    // };
    window.NOTCHRIS_FIREBASE_CONFIG = null; // keep null for now = local-only mode
  </script>
</head>
<body>

  <!-- LOADER (beaver vibes) -->
  <div id="loader" class="loader">
    <div class="loader-inner">
      <div class="loader-circle"></div>
      <div class="loader-dot"></div>
    </div>
    <p>Loading NotChris hub‚Ä¶</p>
  </div>

  <!-- AUTH SCREEN -->
  <div id="authScreen" class="screen centered">
    <div class="auth-card">
      <h1>NotChris Hub</h1>
      <p class="sub">Sign in with a username & 4-digit PIN. Your stats & progress stay on this device.</p>
      <form id="authForm">
        <input id="authName" type="text" placeholder="Username" autocomplete="off" />
        <input id="authPin" type="password" placeholder="PIN (4 digits)" maxlength="4" />
        <button type="submit">Enter hub</button>
      </form>
      <p class="hint">
        If the username exists, you log in. If not, a new profile is created locally.
      </p>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app" class="app hidden">
    <!-- Topbar -->
    <header class="topbar">
      <div>
        <h2 id="welcomeTitle">Hub</h2>
        <p id="welcomeSubtitle" class="muted">Welcome to the NotChris hub ‚Äî stats saved locally.</p>
      </div>
      <div class="top-right">
        <div class="streak-pill">
          <span id="streakFlame">üî•</span>
          <span id="streakLabel">0 day streak</span>
        </div>
        <div class="top-coins">
          <span class="coin-icon"></span>
          <span id="coinAmount">0</span>
        </div>
      </div>
    </header>

    <!-- Main content -->
    <main class="main">
      <!-- HOME -->
      <section id="screen-home" class="inner-screen active">
        <!-- Profile summary -->
        <div class="card profile-banner">
          <div class="banner-left">
            <div class="avatar-circle" id="profileAvatar"></div>
          </div>
          <div class="banner-center">
            <div class="banner-name-rank">
              <span id="profileNameBanner" class="banner-name">Player</span>
              <span id="profileRankBanner" class="rank-pill">New Player</span>
            </div>
            <div class="level-row">
              <span id="profileLevelLabel">Level 1</span>
              <div class="level-bar">
                <div id="profileLevelFill" class="level-fill"></div>
              </div>
              <span id="profileXPLabel" class="level-xp">0 / 100 XP</span>
            </div>
          </div>
          <div class="banner-right">
            <div class="stat-mini">
              <span class="stat-mini-label">Games</span>
              <span id="homeGames" class="stat-mini-value">0</span>
            </div>
            <div class="stat-mini">
              <span class="stat-mini-label">Ach</span>
              <span id="homeAch" class="stat-mini-value">0</span>
            </div>
            <div class="stat-mini">
              <span class="stat-mini-label">Coins</span>
              <span id="homeCoins" class="stat-mini-value">0</span>
            </div>
          </div>
        </div>

        <!-- Continue / daily -->
        <div class="card">
          <div class="card-header">
            <span>Quick actions</span>
            <span id="usernameLabel"></span>
          </div>
          <div class="quick-row">
            <button id="continueBtn" class="pill-btn" disabled>Continue last game</button>
            <button id="dailyBtn" class="pill-btn">Claim daily reward</button>
          </div>
          <p class="muted tiny">
            Daily reward gives coins & XP. Continue takes you back to your most recent game.
          </p>
        </div>

        <!-- Popular / trending / new -->
        <div class="card">
          <h3>Popular today</h3>
          <div id="popularGames" class="pill-row"></div>
        </div>

        <div class="card">
          <h3>Trending this week</h3>
          <div id="trendingGames" class="pill-row"></div>
        </div>

        <div class="card">
          <h3>Recently added</h3>
          <div id="newGames" class="pill-row"></div>
        </div>
      </section>

      <!-- GAMES -->
      <section id="screen-games" class="inner-screen">
        <div class="section-header">
          <h3>Games</h3>
        </div>

        <div class="games-source-toggle">
          <button class="games-source-btn active" data-source="internal">Internal</button>
          <button class="games-source-btn" data-source="external">External</button>
        </div>

        <div class="games-filters">
          <div id="gamesCategories" class="games-categories"></div>
          <select id="gamesSort" class="select">
            <option value="popular">Sort: Popular</option>
            <option value="az">Sort: A‚ÄìZ</option>
            <option value="new">Sort: Newest</option>
            <option value="unplayed">Sort: Not played</option>
          </select>
        </div>

        <input id="gameSearch" class="search" type="text" placeholder="Search games‚Ä¶" />

        <div class="filter-chips">
          <label><input type="checkbox" id="filterTwoPlayer" /> 2-player</label>
          <label><input type="checkbox" id="filterEasy" /> Easy only</label>
          <label><input type="checkbox" id="filterChromebook" /> Chromebook-safe</label>
        </div>

        <div id="gameList" class="game-list"></div>
      </section>

      <!-- CHAT -->
      <section id="screen-chat" class="inner-screen">
        <div class="section-header">
          <h3>Chatroom</h3>
          <span id="chatModeLabel" class="muted tiny">Local demo chat</span>
        </div>

        <div class="card chat-card">
          <div class="chat-header-row">
            <select id="chatChannelSelect" class="select small">
              <option value="general">#general</option>
              <option value="games">#games</option>
              <option value="help">#help</option>
            </select>
            <span id="onlineCount" class="muted tiny">Online: ~1</span>
          </div>
          <div id="chatMessages" class="chat-messages"></div>
          <div class="chat-input-row">
            <input id="chatInput" type="text" placeholder="Type a message or /help‚Ä¶" />
            <button id="chatSend">Send</button>
          </div>
        </div>
        <p class="muted tiny">
          Commands: /help, /stats, /coins, /daily, /randomgame, /rank, /clear (local).
        </p>
      </section>

      <!-- ACHIEVEMENTS -->
      <section id="screen-achievements" class="inner-screen">
        <div class="section-header">
          <h3>Achievements & Badges</h3>
        </div>
        <div id="achievementsList" class="ach-list"></div>
      </section>

      <!-- LEADERBOARD -->
      <section id="screen-leaderboard" class="inner-screen">
        <div class="section-header">
          <h3>Leaderboard</h3>
        </div>

        <div class="leaderboard-toggle">
          <button id="lbLocalBtn" class="lb-toggle-btn active">Local</button>
          <button id="lbGlobalBtn" class="lb-toggle-btn">Global</button>
        </div>

        <div class="leaderboard-filters">
          <select id="lbMetric" class="select small">
            <option value="xp">XP</option>
            <option value="coins">Coins</option>
            <option value="gamesPlayed">Games played</option>
            <option value="achievementsUnlocked">Achievements</option>
          </select>
          <select id="lbRange" class="select small">
            <option value="all">All time</option>
            <option value="week">This week (local)</option>
          </select>
        </div>

        <div class="card">
          <ol id="leaderboardList" class="leaderboard-list"></ol>
          <p id="leaderboardHint" class="muted tiny">
            Local leaderboard is based on profiles on this device. Global uses Firebase when configured.
          </p>
        </div>
      </section>

      <!-- PROFILE -->
      <section id="screen-profile" class="inner-screen">
        <div class="section-header">
          <h3>Profile</h3>
        </div>

        <!-- Big profile banner reused style -->
        <div class="card profile-banner">
          <div class="banner-left">
            <div class="avatar-circle large" id="profileAvatarBig"></div>
          </div>
          <div class="banner-center">
            <div class="banner-name-rank">
              <span id="profileNameBig" class="banner-name">Player</span>
              <span id="profileRankBig" class="rank-pill">New Player</span>
            </div>
            <div class="level-row">
              <span id="profileLevelLabelBig">Level 1</span>
              <div class="level-bar">
                <div id="profileLevelFillBig" class="level-fill"></div>
              </div>
              <span id="profileXPLabelBig" class="level-xp">0 / 100 XP</span>
            </div>
            <div class="title-row">
              <span class="muted tiny">Title:</span>
              <span id="profileTitle" class="title-pill">Rookie</span>
            </div>
          </div>
        </div>

        <!-- Stats grid -->
        <div class="card stats-grid-card">
          <div class="stat-grid-item">
            <span class="stat-label">Coins</span>
            <span id="profileCoins" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Games played</span>
            <span id="profileGames" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Achievements</span>
            <span id="profileAch" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Streak</span>
            <span id="profileStreak" class="stat-value">0 days</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Messages sent</span>
            <span id="profileMessages" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Favorite game</span>
            <span id="profileFavorite" class="stat-value small">None yet</span>
          </div>
        </div>

        <!-- Recent activity -->
        <div class="card">
          <h3>Recent activity</h3>
          <ul id="activityList" class="activity-list"></ul>
        </div>

        <!-- Settings -->
        <div class="card">
          <h3>Settings</h3>
          <div class="settings-row">
            <label>Accent theme</label>
            <select id="themeSelect" class="select small">
              <option value="red">Red (default)</option>
              <option value="blue">Blue</option>
              <option value="purple">Purple</option>
              <option value="gold">Gold</option>
            </select>
          </div>
          <div class="settings-row">
            <label>Animations</label>
            <select id="animSelect" class="select small">
              <option value="full">Full</option>
              <option value="reduced">Reduced</option>
            </select>
          </div>
          <button id="clearDataBtn" class="danger-btn small">Clear all local data</button>
        </div>

        <!-- Session -->
        <div class="card">
          <h3>Session</h3>
          <button id="logoutBtn" class="danger-btn">Log out (this device)</button>
        </div>
      </section>

      <!-- HELP -->
      <section id="screen-help" class="inner-screen">
        <div class="section-header">
          <h3>Help & Commands</h3>
        </div>
        <div class="card">
          <h3>Basics</h3>
          <ul class="help-list">
            <li>Use the bottom nav to switch between Home, Games, Chat, Achievements, Leaderboard, Profile, Help.</li>
            <li>Your username & PIN only live in this browser. No server login yet.</li>
            <li>Coins, XP, streak, badges are all saved locally.</li>
          </ul>
        </div>
        <div class="card">
          <h3>Chat commands</h3>
          <ul class="help-list">
            <li><code>/help</code> ‚Äì show commands</li>
            <li><code>/stats</code> ‚Äì show your stats</li>
            <li><code>/coins</code> ‚Äì show your coins</li>
            <li><code>/daily</code> ‚Äì quick daily reward</li>
            <li><code>/randomgame</code> ‚Äì pick a random game</li>
            <li><code>/rank</code> ‚Äì show your rank</li>
            <li><code>/clear</code> ‚Äì clear chat on your device</li>
          </ul>
        </div>
        <div class="card">
          <h3>Global features</h3>
          <p class="muted tiny">
            Global chat & leaderboards unlock when Firebase config is added in <code>index.html</code>.
          </p>
        </div>
      </section>
    </main>

    <!-- Bottom nav -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-target="home">
        <span class="nav-icon home"></span>
        <span class="nav-label">Home</span>
      </button>
      <button class="nav-btn" data-target="games">
        <span class="nav-icon games"></span>
        <span class="nav-label">Games</span>
      </button>
      <button class="nav-btn" data-target="chat">
        <span class="nav-icon chat"></span>
        <span class="nav-label">Chat</span>
      </button>
      <button class="nav-btn" data-target="achievements">
        <span class="nav-icon trophy"></span>
        <span class="nav-label">Ach</span>
      </button>
      <button class="nav-btn" data-target="leaderboard">
        <span class="nav-icon lb"></span>
        <span class="nav-label">LB</span>
      </button>
      <button class="nav-btn" data-target="profile">
        <span class="nav-icon user"></span>
        <span class="nav-label">Profile</span>
      </button>
      <button class="nav-btn" data-target="help">
        <span class="nav-icon help"></span>
        <span class="nav-label">Help</span>
      </button>
    </nav>
  </div>

  <!-- GAME OVERLAY (INTERNAL ONLY) -->
  <div id="gameOverlay" class="game-overlay hidden">
    <div class="game-overlay-inner">
      <div class="game-overlay-top">
        <button id="gameBackBtn" class="overlay-btn">‚Üê</button>
        <span id="gameTitle" class="overlay-title"></span>
        <button id="gameFullscreenBtn" class="overlay-btn">‚õ∂</button>
      </div>
      <div class="game-frame-wrap">
        <iframe id="gameFrame" src="" allowfullscreen loading="lazy"></iframe>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
