<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NotChris Hub</title>
  <link rel="stylesheet" href="style.css" />

  <!-- ============================================
       üî• FIREBASE BACKEND (Global Chat + Leaderboard)
       Using Firebase v9 Modular SDK
       ============================================ -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDZp74S6FUq40pQ1rSunWbxNufH4WYDzBo",
      authDomain: "notchris-hub.firebaseapp.com",
      projectId: "notchris-hub",
      storageBucket: "notchris-hub.firebasestorage.app",
      messagingSenderId: "325966044596",
      appId: "1:325966044596:web:4d28a86659da9a0923e6e1",
      measurementId: "G-249QW10J8Q"
    };

    window.notchrisApp = initializeApp(firebaseConfig);
    window.notchrisDB  = getFirestore(window.notchrisApp);
    window.NOTCHRIS_BACKEND_ENABLED = true;
  </script>
</head>

<body>

  <!-- LOADER -->
  <div id="loader" class="loader">
    <div class="loader-inner">
      <div class="loader-circle"></div>
      <div class="loader-dot"></div>
    </div>
    <p>Loading NotChris hub‚Ä¶</p>
  </div>

  <!-- AUTH SCREEN -->
  <div id="authScreen" class="screen centered">
    <div class="auth-card">
      <h1>NotChris Hub</h1>
      <p class="sub">Sign in with username & 4-digit PIN.</p>
      <form id="authForm">
        <input id="authName" type="text" placeholder="Username" />
        <input id="authPin" type="password" maxlength="4" placeholder="PIN (4 digits)" />
        <button type="submit">Enter Hub</button>
      </form>
      <p class="hint">If the user exists ‚Üí login. If not ‚Üí create new profile.</p>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="app" class="app hidden">

    <!-- TOPBAR -->
    <header class="topbar">
      <div>
        <h2 id="welcomeTitle">Hub</h2>
        <p id="welcomeSubtitle" class="muted">
          Welcome to the NotChris Hub ‚Äî Stats stored locally & globally.
        </p>
      </div>

      <div class="top-right">
        <div class="streak-pill">
          <span id="streakFlame">üî•</span>
          <span id="streakLabel">0 day streak</span>
        </div>
        <div class="top-coins">
          <span class="coin-icon"></span>
          <span id="coinAmount">0</span>
        </div>
      </div>
    </header>

    <main class="main">

      <!-- HOME -->
      <section id="screen-home" class="inner-screen active">

        <!-- PROFILE BANNER -->
        <div class="card profile-banner">
          <div class="banner-left">
            <div id="profileAvatar" class="avatar-circle"></div>
          </div>

          <div class="banner-center">
            <div class="banner-name-rank">
              <span id="profileNameBanner" class="banner-name">Player</span>
              <span id="profileRankBanner" class="rank-pill">New Player</span>
            </div>

            <div class="level-row">
              <span id="profileLevelLabel">Level 1</span>
              <div class="level-bar">
                <div id="profileLevelFill" class="level-fill"></div>
              </div>
              <span id="profileXPLabel" class="level-xp">0 / 100 XP</span>
            </div>
          </div>

          <div class="banner-right">
            <div class="stat-mini">
              <span class="stat-mini-label">Games</span>
              <span id="homeGames" class="stat-mini-value">0</span>
            </div>
            <div class="stat-mini">
              <span class="stat-mini-label">Ach</span>
              <span id="homeAch" class="stat-mini-value">0</span>
            </div>
            <div class="stat-mini">
              <span class="stat-mini-label">Coins</span>
              <span id="homeCoins" class="stat-mini-value">0</span>
            </div>
          </div>
        </div>

        <!-- QUICK ACTIONS -->
        <div class="card">
          <div class="card-header">
            <span>Quick actions</span>
            <span id="usernameLabel"></span>
          </div>

          <div class="quick-row">
            <button id="continueBtn" class="pill-btn" disabled>Continue last game</button>
            <button id="dailyBtn" class="pill-btn">Daily reward</button>
          </div>
        </div>

        <!-- POPULAR / TRENDING / NEW -->
        <div class="card">
          <h3>Popular today</h3>
          <div id="popularGames" class="pill-row"></div>
        </div>

        <div class="card">
          <h3>Trending this week</h3>
          <div id="trendingGames" class="pill-row"></div>
        </div>

        <div class="card">
          <h3>Recently added</h3>
          <div id="newGames" class="pill-row"></div>
        </div>
      </section>

      <!-- GAMES -->
      <section id="screen-games" class="inner-screen">

        <div class="section-header">
          <h3>Games</h3>
        </div>

        <div class="games-source-toggle">
          <button class="games-source-btn active" data-source="internal">Internal</button>
          <button class="games-source-btn" data-source="external">External</button>
        </div>

        <div class="games-filters">
          <div id="gamesCategories" class="games-categories"></div>
          <select id="gamesSort" class="select">
            <option value="popular">Sort: Popular</option>
            <option value="az">A‚ÄìZ</option>
            <option value="new">Newest</option>
            <option value="unplayed">Not played</option>
          </select>
        </div>

        <input id="gameSearch" class="search" type="text" placeholder="Search games‚Ä¶" />

        <div class="filter-chips">
          <label><input type="checkbox" id="filterTwoPlayer" /> 2-player</label>
          <label><input type="checkbox" id="filterEasy" /> Easy only</label>
          <label><input type="checkbox" id="filterChromebook" /> Chromebook-safe</label>
        </div>

        <div id="gameList" class="game-list"></div>
      </section>

      <!-- CHAT -->
      <section id="screen-chat" class="inner-screen">
        <div class="section-header">
          <h3>Chatroom</h3>
          <span id="chatModeLabel" class="muted tiny">Global chat enabled</span>
        </div>

        <div class="card chat-card">
          <div class="chat-header-row">
            <select id="chatChannelSelect" class="select small">
              <option value="general">#general</option>
              <option value="games">#games</option>
              <option value="help">#help</option>
            </select>
            <span id="onlineCount" class="muted tiny">Online: 1</span>
          </div>

          <div id="chatMessages" class="chat-messages"></div>

          <div class="chat-input-row">
            <input id="chatInput" type="text" placeholder="Type a message or /help‚Ä¶" />
            <button id="chatSend">Send</button>
          </div>
        </div>
      </section>

      <!-- ACHIEVEMENTS -->
      <section id="screen-achievements" class="inner-screen">
        <div class="section-header">
          <h3>Achievements & Badges</h3>
        </div>
        <div id="achievementsList" class="ach-list"></div>
      </section>

      <!-- LEADERBOARD -->
      <section id="screen-leaderboard" class="inner-screen">
        <div class="section-header">
          <h3>Leaderboard</h3>
        </div>

        <div class="leaderboard-toggle">
          <button id="lbLocalBtn" class="lb-toggle-btn active">Local</button>
          <button id="lbGlobalBtn" class="lb-toggle-btn">Global</button>
        </div>

        <div class="leaderboard-filters">
          <select id="lbMetric" class="select small">
            <option value="xp">XP</option>
            <option value="coins">Coins</option>
            <option value="gamesPlayed">Games Played</option>
            <option value="achievementsUnlocked">Achievements</option>
          </select>

          <select id="lbRange" class="select small">
            <option value="all">All Time</option>
            <option value="week">This Week</option>
          </select>
        </div>

        <div class="card">
          <ol id="leaderboardList" class="leaderboard-list"></ol>
          <p class="muted tiny">
            Global leaderboard uses Firebase when available.
          </p>
        </div>
      </section>

      <!-- PROFILE -->
      <section id="screen-profile" class="inner-screen">
        <div class="section-header">
          <h3>Profile</h3>
        </div>

        <!-- PROFILE BANNER -->
        <div class="card profile-banner">
          <div class="banner-left">
            <div id="profileAvatarBig" class="avatar-circle large"></div>
          </div>

          <div class="banner-center">
            <div class="banner-name-rank">
              <span id="profileNameBig" class="banner-name">Player</span>
              <span id="profileRankBig" class="rank-pill">New Player</span>
            </div>

            <div class="level-row">
              <span id="profileLevelLabelBig">Level 1</span>
              <div class="level-bar">
                <div id="profileLevelFillBig" class="level-fill"></div>
              </div>
              <span id="profileXPLabelBig" class="level-xp">0 / 100 XP</span>
            </div>

            <div class="title-row">
              <span class="muted tiny">Title:</span>
              <span id="profileTitle" class="title-pill">Rookie</span>
            </div>
          </div>
        </div>

        <!-- STATS GRID -->
        <div class="card stats-grid-card">
          <div class="stat-grid-item">
            <span class="stat-label">Coins</span>
            <span id="profileCoins" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Games Played</span>
            <span id="profileGames" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Achievements</span>
            <span id="profileAch" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Streak</span>
            <span id="profileStreak" class="stat-value">0 days</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Messages Sent</span>
            <span id="profileMessages" class="stat-value">0</span>
          </div>
          <div class="stat-grid-item">
            <span class="stat-label">Favorite Game</span>
            <span id="profileFavorite" class="stat-value small">None yet</span>
          </div>
        </div>

        <!-- RECENT ACTIVITY -->
        <div class="card">
          <h3>Recent Activity</h3>
          <ul id="activityList" class="activity-list"></ul>
        </div>

        <!-- SETTINGS -->
        <div class="card">
          <h3>Settings</h3>

          <div class="settings-row">
            <label>Accent theme</label>
            <select id="themeSelect" class="select small">
              <option value="red">Red (default)</option>
              <option value="blue">Blue</option>
              <option value="purple">Purple</option>
              <option value="gold">Gold</option>
            </select>
          </div>

          <div class="settings-row">
            <label>Animations</label>
            <select id="animSelect" class="select small">
              <option value="full">Full</option>
              <option value="reduced">Reduced</option>
            </select>
          </div>

          <button id="clearDataBtn" class="danger-btn small">Clear local data</button>
        </div>

        <!-- SESSION -->
        <div class="card">
          <h3>Session</h3>
          <button id="logoutBtn" class="danger-btn">Log out</button>
        </div>
      </section>

      <!-- HELP -->
      <section id="screen-help" class="inner-screen">
        <div class="section-header">
          <h3>Help & Commands</h3>
        </div>

        <div class="card">
          <h3>Basics</h3>
          <ul class="help-list">
            <li>Bottom nav switches tabs.</li>
            <li>Username + PIN saved locally.</li>
            <li>Coins, XP, streak, badges saved locally + globally.</li>
          </ul>
        </div>

        <div class="card">
          <h3>Commands</h3>
          <ul class="help-list">
            <li><code>/help</code> ‚Äì commands</li>
            <li><code>/stats</code> ‚Äì your stats</li>
            <li><code>/coins</code> ‚Äì your coins</li>
            <li><code>/daily</code> ‚Äì claim daily reward</li>
            <li><code>/randomgame</code> ‚Äì random game</li>
            <li><code>/rank</code> ‚Äì your rank</li>
            <li><code>/clear</code> ‚Äì clear chat (local)</li>
          </ul>
        </div>

        <div class="card">
          <h3>Global features</h3>
          <p class="muted tiny">
            Firebase enables global chat + leaderboard.
          </p>
        </div>
      </section>

    </main>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-target="home"><span class="nav-icon home"></span><span class="nav-label">Home</span></button>
      <button class="nav-btn" data-target="games"><span class="nav-icon games"></span><span class="nav-label">Games</span></button>
      <button class="nav-btn" data-target="chat"><span class="nav-icon chat"></span><span class="nav-label">Chat</span></button>
      <button class="nav-btn" data-target="achievements"><span class="nav-icon trophy"></span><span class="nav-label">Ach</span></button>
      <button class="nav-btn" data-target="leaderboard"><span class="nav-icon lb"></span><span class="nav-label">LB</span></button>
      <button class="nav-btn" data-target="profile"><span class="nav-icon user"></span><span class="nav-label">Profile</span></button>
      <button class="nav-btn" data-target="help"><span class="nav-icon help"></span><span class="nav-label">Help</span></button>
    </nav>

  </div>

  <!-- GAME OVERLAY -->
  <div id="gameOverlay" class="game-overlay hidden">
    <div class="game-overlay-inner">
      <div class="game-overlay-top">
        <button id="gameBackBtn" class="overlay-btn">‚Üê</button>
        <span id="gameTitle" class="overlay-title"></span>
        <button id="gameFullscreenBtn" class="overlay-btn">‚õ∂</button>
      </div>
      <div class="game-frame-wrap">
        <iframe id="gameFrame" src="" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <script src="script.js"></script>

</body>
</html>
